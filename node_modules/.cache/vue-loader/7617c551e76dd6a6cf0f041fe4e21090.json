{"remainingRequest":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/src/views/Apt.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/src/views/Apt.vue","mtime":1621837826921},{"path":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yoon/SSAFY/vuejs/Project/happyhouse_final/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2FwdGRldGFpbCB7CiAgYWxpZ24tY29udGVudDogY2VudGVyOwogIGhlaWdodDogNjAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7Cn0KaDIgewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQo="},{"version":3,"sources":["Apt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Apt.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div style=\"min-height: 400px\">\n    <h2>아파트 매매 정보</h2>\n    <br />\n    <br />\n    <v-container>\n      <v-row>\n        <v-col>\n          <v-btn @click=\"searchDong\">동별 검색</v-btn>\n        </v-col>\n        <v-spacer></v-spacer>\n        <v-col>\n          <v-btn @click=\"searchApt\">아파트별 검색</v-btn>\n        </v-col>\n      </v-row>\n\n      <!-- 시,군구,동 별 검색 -->\n      <v-row>\n        <v-col class=\"d-flex\" cols=\"4\" sm=\"2\">\n          <v-select\n            label=\"시\"\n            v-bind:items=\"sidos\"\n            v-model=\"selectSido\"\n            item-text=\"sidoName\"\n            item-value=\"sidoCode\"\n            max-height=\"auto\"\n            autocomplete\n            dense\n            solo\n            v-on:change=\"selectedSido\"\n          >\n            <template slot=\"selection\" slot-scope=\"data\">\n              {{ data.item.sidoName }}\n            </template>\n          </v-select>\n        </v-col>\n        <v-col class=\"d-flex\" cols=\"4\" sm=\"2\">\n          <v-select\n            label=\"구/군\"\n            v-bind:items=\"guguns\"\n            v-model=\"selectGugun\"\n            item-text=\"gugunName\"\n            item-value=\"gugunCode\"\n            max-height=\"auto\"\n            autocomplete\n            dense\n            solo\n            v-on:change=\"selectedGugun\"\n          >\n            <template slot=\"selection\" slot-scope=\"data\">\n              {{ data.item.gugunName }}\n            </template>\n          </v-select>\n        </v-col>\n        <v-col v-if=\"isSearchDong == 0\" class=\"d-flex\" cols=\"4\" sm=\"2\">\n          <v-select\n            label=\"동\"\n            v-bind:items=\"dongs\"\n            v-model=\"selectDong\"\n            item-text=\"dongName\"\n            item-value=\"dongName\"\n            max-height=\"auto\"\n            autocomplete\n            dense\n            solo\n            v-on:change=\"selectedDong\"\n          >\n            <template slot=\"selection\" slot-scope=\"data\">\n              {{ data.item.dongName }}\n            </template>\n          </v-select>\n        </v-col>\n        <v-col v-else-if=\"isSearchDong == 1\">\n          <search-bar @apt-name=\"sendAptName\" />\n        </v-col>\n      </v-row>\n      <!-- MAP and Apt List-->\n      <v-row>\n        <h3>총 {{ aptsBydong.length }} 개의 결과물이 있습니다.</h3>\n      </v-row>\n      <v-row>\n        <v-col cols=\"7\">\n          <KakaoMap :si=\"sidoName\" :gugun=\"gugunName\" :dong=\"selectDong\" :aptlist=\"aptsBydong\" />\n        </v-col>\n\n        <!-- apt 상세정보 -->\n\n        <div id=\"aptdetail\">\n          <div hidden style=\"height: 40px\"></div>\n          <v-row style=\"margin-top: 40px\">\n            <v-col cols=\"5\" align=\"left\">\n              <apt-list\n                :aptlist=\"aptsBydong\"\n                @select-apt=\"selectedApt\"\n                @select-img=\"selectedImage\"\n                :dongCode=\"selectDong\"\n              />\n            </v-col>\n            <v-col cols=\"6\">\n              <h2>아파트 상세정보</h2>\n              <apt-detail :apt=\"selectApt\" :img=\"selectImage\" />\n            </v-col>\n          </v-row>\n        </div>\n      </v-row>\n      <v-row>\n        <v-col cols=\"12\" align=\"center\">\n          <apt-around-info\n            :sido=\"selectSido\"\n            :sidoname=\"sidoName\"\n            :gugun=\"selectGugun\"\n            :gugunname=\"gugunName\"\n            :dong=\"selectDong\"\n            :envs=\"envs\"\n          />\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport SearchBar from \"@/components/apt/SearchBar.vue\";\nimport AptList from \"@/components/apt/AptList.vue\";\nimport AptDetail from \"@/components/apt/AptDetail.vue\";\nimport KakaoMap from \"@/components/map/KakaoMap.vue\";\nimport http from \"@/util/http-common\";\n\n// vue cli enviroment variables 검색\n// 반드시 VUE_APP으로 시작해야 한다.\n// const API_KEY = process.env.VUE_APP_APT_DEAL_API_KEY; //env 파일이름으로\nconst API_KEY =\n  \"Utk4pE8vGB%2BaPGsKKwhKQreMwU2cR4K9Dxc7t%2BjJEdgetcgm3E1UGZhdeYDxTSzaydt5a8SvvDdEhNNDbDr7HA%3D%3D\";\nconst API_URL =\n  \"http://openapi.molit.go.kr/OpenAPI_ToolInstallPackage/service/rest/RTMSOBJSvc/getRTMSDataSvcAptTradeDev\";\n\nexport default {\n  name: \"Apt\",\n  components: {\n    SearchBar,\n    AptList,\n    AptDetail,\n    KakaoMap,\n  },\n  data() {\n    return {\n      dongCode: \"\",\n      selectApt: \"\", // AptList에서 선택된 아파트\n      selectImage: \"\", // AptList에서 선택된 아파트 이미지\n      apts: [], // selectGugun에 해당하는 아파트 배열\n      aptsBydong: [], // 동별 검색 후 가져온 아파트들\n      selectSido: \"\", // 시도 코드\n      selectGugun: \"\", // 구군 코드\n      selectDong: \"\", // 동 이름\n      sidos: [],\n      guguns: [],\n      dongs: [],\n      sidoName: \"\", // 시도 이름\n      gugunName: \"\", // 구군 이름\n      dongName: \"\",\n      envs: [],\n      isSearchDong: 0, // 동(0)으로 검색할것인가 아파트(1)로 검색할것인가\n    };\n  },\n  mounted() {\n    http\n      .get(\"/map/sido\")\n      .then((response) => (this.sidos = response.data))\n      .catch(() => {\n        this.errored = true;\n      })\n      .finally(() => (this.loading = false));\n  },\n  methods: {\n    sendAptName(aptname) {\n      this.aptsBydong = [];\n      const params = {\n        LAWD_CD: this.selectGugun,\n        DEAL_YMD: \"201912\",\n        serviceKey: decodeURIComponent(API_KEY),\n      };\n      http\n        .get(API_URL, {\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.apts = response.data.response.body.items.item;\n          // 아파트 동이름으로 가져오기\n          this.apts.forEach((element) => {\n            if (element.아파트.includes(aptname)) {\n              console.log(element.아파트);\n              this.aptsBydong.push(element);\n            }\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    sendDongCode(dongCode) {\n      this.aptsBydong = [];\n      this.dongCode = dongCode;\n\n      const params = {\n        LAWD_CD: this.dongCode,\n        DEAL_YMD: \"201912\",\n        serviceKey: decodeURIComponent(API_KEY),\n      };\n\n      console.log(\"동 코드: \" + params.LAWD_CD);\n      console.log(\"년월: \" + params.DEAL_YMD);\n      console.log(\"서비스키: \" + params.serviceKey);\n\n      http\n        .get(API_URL, {\n          //params:params\n          params,\n        })\n        .then((response) => {\n          // console.log(response.data.response.body);\n          this.apts = response.data.response.body.items.item;\n          // console.log(this.apts);\n          // 아파트 동이름으로 가져오기\n          this.apts.forEach((element) => {\n            if (element.법정동 == \" \" + this.selectDong) {\n              // console.log('충출출추루루루룰력: ' +element.법정동);\n              this.aptsBydong.push(element);\n            }\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    selectedApt: function (apt) {\n      this.selectApt = apt;\n    },\n    selectedImage: function (img) {\n      this.selectImage = img;\n    },\n    selectedSido: function () {\n      http\n        .get(\"/map/sido/\" + this.selectSido)\n        .then((response) => (this.guguns = response.data))\n        .catch(() => {\n          this.errored = true;\n        })\n        .finally(() => (this.loading = false));\n    },\n    selectedGugun: function () {\n      http\n        .get(\"/map/sido/gugun/\" + this.selectGugun)\n        .then((response) => (this.dongs = response.data))\n        .catch(() => {\n          this.errored = true;\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    selectedDong: function () {\n      console.log(\"동 고름\");\n      // 동까지 골라지면\n      this.sendDongCode(this.selectGugun);\n      http // 시코드로 시이름 구하고\n        .get(\"/map/getSiName/\" + this.selectSido)\n        .then((response) => (this.sidoName = response.data))\n        .catch(() => {\n          this.errored = true;\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n      http // 구군코드로 구군이름 얻어오고\n        .get(\"/map/getGugunName/\" + this.selectGugun)\n        .then((response) => (this.gugunName = response.data))\n        .catch(() => {\n          this.errored = true;\n        })\n        .finally(() => {\n          console.log(this.gugunName);\n          console.log(this.selectDong);\n          http // 해당 동의 환경정보 가져옴\n            .get(\"/aptaround/env/\" + this.sidoName + \" \" + this.gugunName + \"/\" + this.selectDong)\n            .then((response) => (this.envs = response.data))\n            .catch(() => {\n              this.errored = true;\n            })\n            .finally(() => (this.loading = false));\n        });\n    },\n    searchDong() {\n      this.isSearchDong = 0;\n    },\n    searchApt() {\n      this.isSearchDong = 1;\n    },\n  },\n};\n</script>\n\n<style>\n#aptdetail {\n  align-content: center;\n  height: 600px;\n  width: 100%;\n  border: 1px solid black;\n}\nh2 {\n  text-align: center;\n}\n</style>\n"]}]}